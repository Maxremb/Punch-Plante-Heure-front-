<div class="container">
    <br>
    <div class="row">
    <div class="col-lg-7">
        <form>
            <h2>Selectionner un jardin</h2>
            <select>
                <option>Vos jardin</option>
                <option>Vos jardin</option>
                <option>Vos jardin</option>
            </select>
            <br><br>
            <table border="3px solid black">
                <tbody>
                    <tr *ngFor="let ligne of this.matrice; let index = index; trackBy:trackByIndex;">
                        <td *ngFor="let plante of this.matrice[index]; let index2 = index; trackBy:trackByIndex;" width=20px
                            height=20px (click)="modifOnClick(index, index2); addPlanteToJardin(this.planteSelectionner, [index, index2])" title="{{matrice[index][index2]}}">
                            <div *ngIf="matrice[index][index2]=='chemin'" class="chemin">
                                &nbsp;
                            </div>
                            <div *ngIf="matrice[index][index2]=='obstacle'" class="obstacle">
                                &nbsp;
                            </div>
                            <div *ngIf="matrice[index][index2]==''" class="vide">
                                &nbsp;
                            </div>
                            <div *ngIf="matrice[index][index2]!='chemin'&&matrice[index][index2]!='obstacle'&& matrice[index][index2].length"
                                class="plante">
                                &nbsp;
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <p>(Un carreau de cette grille représente un carré de votre jardin de 5x5cm)</p>

            <button class="btn btn-success" (click)=sauvgardeJardin()><i class="fa fa-floppy-o" aria-hidden="true"></i> Sauvgarder</button>
            <button class="btn btn-danger" (click)=remiseAZero()><i class="fa fa-times" aria-hidden="true"></i> Remettre à zéro</button>


            <!-- On modélise le jardin à 1pixel = 1cm -->
            <!-- <canvas id="carteJardin" height=({{this.jardin.width}}*100) width=({{this.jardin.length}})*100>Représentation
                graphique de votre jardin</canvas> -->


            <!-- Légende du code couleur de la carte  -->
            <br>
            <legend><strong>Légende</strong></legend>
            <table>
                <thead>
                    <tr>
                        <td>Couleur</td>
                        <td> Objet</td>
                    </tr>
                </thead>
                <tbody>
                    <tr (click)="modifSelection('')">
                        <td class="vide"></td>
                        <td>Vide</td>
                    </tr>
                    <tr (click)="modifSelection('obstacle')">
                        <td class="obstacle"></td>
                        <td>Obstacle</td>
                    </tr>
                    <tr (click)="modifSelection('chemin')">
                        <td class="chemin"></td>
                        <td>Chemin</td>
                    </tr>
                    <tr (click)="modifSelection('plante')">
                        <td class="plante"></td>
                        <td>Plante</td>
                    </tr>
                </tbody>
            </table>

            <!-- Affichage de la sélection active :  -->
            Selection active = {{this.selection}}
            <span *ngIf="this.selection== ''">vide</span>
            
        <!-- Affiche la liste des plantes et autre pour sélectionner et placer dans notre plan -->

        <!-- <select (change)="modifSelection($value)">
            <option class="selected" value="" >Vide</option>
            <option value="chemin">Chemin</option>
            <option value="obstacle">Obstacle</option>
            <option *ngFor="let plant of this.plantes" value="plante">
                {{plant.modelPlant.commun}}
            </option>
        </select> -->

        </form>
    </div>

    <div class="col-lg-4">
        <div>
            <h2>Ajouter une plante à mon jardin</h2>
            <form>
                <input [(ngModel)]="planteRechercher" type="text" placeholder="Nom de la plante"[ngModelOptions]="{standalone: true}">
                <br><button class="btn btn-success" (click)="rechercherPlante(planteRechercher)"><i class="fa fa-search" aria-hidden="true"></i> Rechercher</button>
            </form>

            <div *ngIf="resultatRecherche">
                <br>
                <h3>Resultat de la recherche</h3>
                <p>(Cliquez sur le nom d'une plante pour la selectionner)</p>
                <table>
                    <thead>
                        <tr>
                            <td style="width: 120px;"><strong>Nom commun</strong></td>
                            <td style="width: 120px;"><strong>Nom scientifique</strong></td>
                        </tr>
                    </thead>
                    <tbody *ngFor="let r of this.resultatRecherche">
                        <tr>
                            <td><span (click)="selectionnerPlante(r); modifSelection(r.commun)">{{r.commun}}</span></td>
                            <td><span (click)="selectionnerPlante(r); modifSelection(r.commun)">{{r.scientifique}}</span></td>
                        </tr>
                    </tbody>
                </table>
                <div *ngIf="message">{{message}}</div>
            </div>

            <br><p *ngIf="(this.selection != '') && (this.selection != 'vide') && (this.selection != 'plante') && (this.selection != 'obstacle') && (this.selection !='chemin')"><u><strong>Plante selectionné :</strong></u> &nbsp; {{this.selection}}</p>
        </div>
        <hr style="width: 200px;">

        <div *ngIf="plantesDuJardin.length">
            <!-- Liste des plantes dans le Jardin -->
            
            <h3>Plantes de mon jardin</h3>
            <table>
                <thead>
                    <tr>
                        <td style="width: 120px;"><strong>Nom commun</strong></td>
                        <td style="width: 100px;"><strong>Emplacement</strong></td>
                        <td><strong>Action</strong></td>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let p of this.plantesDuJardin">
                        <td>{{p.commun}}</td>
                        <td>{{p.coordonnees}}</td>
                        <td>
                            <button *ngIf="!p.coordonnees" class="btn btn-success" title="Mettre la plante dans le jardin"><i class="fa fa-leaf" aria-hidden="true"></i></button>
                            <button *ngIf="p.coordonnees" class="btn btn-success" title="Changer la plante de place"><i class="fa fa-arrows" aria-hidden="true"></i></button>
                            <button class="btn btn-danger" (click)="enleverPlanteDuJardin(p.index, p.coordonnees, p.commun)" title="Supprimer la plante du jardin"><i class="fa fa-times" aria-hidden="true"></i></button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
</div>